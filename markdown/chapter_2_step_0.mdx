# Chapter 9: Looting the Dragon

That's great, you already went through 2 whole modules and understood all the basics from how to use Cartesi, but as a web3 application you still want to understand and implement the transfer and ownership of assets right?

The first concept we will learn to deal with is of native assets inside your dApp.

This is as simple as it gets. To perform transference of assets from the dragon to the player's inventory after a successful quest you just have to adapt add a the assets to a collection from the user. Simple as that.

Implement the functionality that allows the adventurer to loot the dragon and add the items to their inventory. This involves coding the `lootDragon` function and updating the state of the dApp to reflect the new asset ownership.

## User Instructions

- **Code Editing Guidelines**: Concentrate on coding the `lootDragon` function which will handle the asset transfer.
- **Task**: Update the `lootDragon` when the corresponding action is called.
- **Task**: Ensure that the looted assets are added to the player's inventory and the state update is recorded.
- **Task**: Read the `handle_advance` to understand how the player wallet address is received from `message_sender` property of the request.


## Required Modification

Adapt the new function called `lootDragon`, to handle the new looting action. Hereâ€™s how you can structure this function:

### The `lootDragon` Function

- Check that the user has an entry for their wallet_id in the inventories data
```javascript
if (!inventories[sender]) {
  inventories[sender] = []
}
let inventory = inventories[sender]
```

- Remove the assets from the dragon and add to the user's
```javascript
let l = dragonAssets.length
for (let i=0; i < l; i++) {
  let asset = dragonAssets.pop()
  console.log(asset)
  inventory.push(asset)
}
```

- Then return the adventurer inventory state
```javascript
return {
  player: sender,
  inventory: inventory
}
```

## Input
Input to trigger the `lootDragon` function, providing the necessary details:

```json
{
  "route": "lootDragon",
  "args": {}
}
```

## Conclusion

Here you understand how easy is to attribute ownership of native assets to a user inside the dApp. it's just associanting their wallet id to the assets.